

```{python}
#| label: setup
import sys
sys.path.insert(0, ".")
from _common import *
import plotly.graph_objects as go
from plotly.subplots import make_subplots
```

# Financing {#sec-financing}

::: {.chapter-opening}
With GDP of approximately $6 billion and sovereign debt already elevated, the Maldives cannot finance multi-billion-dollar infrastructure from domestic revenues alone. Concessional ADB SIDS lending terms (1% interest, 40-year maturity, 10-year grace) carry a grant element of ~83%, which transforms capital-intensive pathways from aspirational to fiscally manageable.
:::

## Total Investment Requirements

Investment varies widely: some pathways require concentrated front-loaded capital; others permit modular phasing.

```{python}
#| label: fig-capex-comparison
#| fig-cap: "Total nominal CAPEX by scenario. Full Integration has the highest upfront investment requirement; Islanded Green can be deployed incrementally."

capex_data = {}
for sid in ALT_SCENARIOS:
    fin = financing.get(sid, {})
    capex_data[sid] = fin.get("total_capex_nominal_m", summaries[sid]["total_capex_million"])

fig = bar_scenario_comparison(
    values=capex_data,
    title="Total Nominal CAPEX by Scenario ($M)",
    yaxis_title="CAPEX ($ Millions)",
    highlight_bau=False,
)
fig.show()
```

@fig-capex-comparison shows S2 (Full Integration) commanding the highest CAPEX (submarine cable, converters, grid), while S4 (Islanded Green) requires far less (distributed solar-battery, no interconnection). S3, S5, S6, S7 fall between. Modular pathways deliver value from the first unit and scale with fiscal conditions.

## Financing Structure: Blended Concessional Finance

ADB SIDS terms (`{python} f"{financing[ALT_SCENARIOS[0]].get('adb_rate_pct', 1):.0f}"`% interest, 40-year maturity, 10-year grace)^[@adb_lending2026.] deliver a grant element of ~**`{python} f"{financing[ALT_SCENARIOS[0]].get('grant_element_pct', 82.8):.1f}"`%**, far below commercial rates.

```{python}
#| label: tbl-financing
#| tbl-cap: "Financing structure for each scenario: ADB concessional vs. commercial tranches."

fin_rows = []
for sid in ALT_SCENARIOS:
    fin = financing.get(sid, {})
    if fin:
        fin_rows.append({
            "Scenario": SCENARIO_SHORT[sid],
            "Total CAPEX ($M)": f"${fin.get('total_capex_nominal_m', 0):,.0f}",
            "ADB Share": f"{fin.get('adb_eligible_share_pct', 0):.0f}%",
            "ADB Rate": f"{fin.get('adb_rate_pct', 0):.0f}%",
            "Commercial Rate": f"{fin.get('commercial_rate_pct', 0):.1f}%",
            "Grant Element": f"{fin.get('grant_element_pct', 0):.1f}%",
            "WACC": f"{fin.get('wacc_pct', 0):.1f}%",
        })

if fin_rows:
    from IPython.display import Markdown
    Markdown(pd.DataFrame(fin_rows).to_markdown(index=False))
```

For every dollar at ADB terms, the Maldives pays back far less than at commercial rates (`{python} f"{financing[ALT_SCENARIOS[0]].get('commercial_rate_pct', 11.5):.1f}"`%), transforming capital-intensive pathways into viable investments.

## Fiscal Sustainability: Debt Service Burden

The IMF flags debt service above ~2% of GDP as a sustainability threshold^[@imf_dst2023.].

```{python}
#| label: fig-debt-service
#| fig-cap: "Peak annual debt service as a percentage of GDP for each scenario."

fig = go.Figure()
for sid in ALT_SCENARIOS:
    fin = financing.get(sid, {})
    peak_pct = fin.get("peak_debt_service_pct_gdp", 0)
    fig.add_trace(go.Bar(
        x=[SCENARIO_SHORT[sid]],
        y=[peak_pct],
        marker_color=SCENARIO_COLORS[sid],
        text=[f"{peak_pct:.2f}%"],
        textposition="outside",
        showlegend=False,
    ))

fig.add_hline(y=2.0, line_dash="dash", line_color="red",
              annotation_text="IMF Debt Sustainability Threshold (2%)")
fig.update_layout(
    title="Peak Annual Debt Service as % of GDP",
    yaxis_title="% of GDP",
    height=420,
)
fig.show()
```

@fig-debt-service shows peak debt service as % of GDP (red line = 2% threshold). Below the line = fiscally sustainable. The 10-year grace provides breathing room during construction.

## Household Bill Impact

Projected annual household bills translate macro financing into micro affordability:

```{python}
#| label: tbl-household-bills
#| tbl-cap: "Average annual household electricity bill under each scenario."

bill_rows = []
for sid in ALT_SCENARIOS:
    fin = financing.get(sid, {})
    if fin:
        bill_rows.append({
            "Scenario": SCENARIO_SHORT[sid],
            "Annual Bill (USD)": f"${fin.get('avg_hh_annual_bill_usd', 0):,.0f}",
            "Annual Bill (MVR)": f"MVR {fin.get('avg_hh_annual_bill_mvr', 0):,.0f}",
            "Tariff Revenue ($M/yr)": f"${fin.get('annual_tariff_revenue_m', 0):,.0f}",
        })

if bill_rows:
    from IPython.display import Markdown
    Markdown(pd.DataFrame(bill_rows).to_markdown(index=False))
```

Lower LCOE translates directly into lower bills. Average figures mask quintile variation (see @sec-distributional); lifeline blocks can substantially alter distributional incidence.

## Subsidy Avoidance

```{python}
#| label: subsidy
# Get subsidy rate from parameters.csv
subsidy_row = parameters[parameters["Parameter"].str.contains("Subsidy Avoidance Rate", na=False, case=False)]
subsidy_per_kwh = float(subsidy_row["Value"].iloc[0]) if len(subsidy_row) > 0 else 0.15
demand_2030 = cba["sectoral_demand"]["bau"]["2030"]["total_gwh"]
annual_subsidy_m = subsidy_per_kwh * demand_2030 * 1000 / 1e6
```

Current subsidy: ~**$`{python} f"{subsidy_per_kwh:.2f}"`/kWh**^[@gom_roadmap2024]. At 2030 demand (`{python} f"{demand_2030:,.0f}"` GWh), this = ~**$`{python} f"{annual_subsidy_m:,.0f}"`M/yr** â€” a recurring drain that grows with demand and spikes with oil prices. Transition to lower-cost RE progressively eliminates this outlay, recovering fiscal space for health, education, or adaptation.

::: {.callout-tip}
Energy transition delivers two fiscal gains at once: (1) reduced fuel imports improve the trade balance and preserve foreign exchange reserves; (2) reduced electricity subsidies free domestic budget space for health, education, or climate adaptation.
:::
